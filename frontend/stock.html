<!DOCTYPE html>
<html>
<head>
  <title>View Stock</title>
  <link rel="stylesheet" href="style.css">
  <style>
    
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
    tr.low-stock { background-color: #ffd6d6; }
  </style>
</head>
<body>
  
  <header>
    
    Current Stock Status
    <button id="themeToggle" class="theme-toggle">üåô Dark Mode</button>

  </header>
  

  <input type="text" id="searchBox" placeholder="Search product..." onkeyup="filterTable()" style="padding: 6px; width: 50%;">

<script>
  function filterTable() {
    const query = document.getElementById("searchBox").value.toLowerCase();
    const rows = document.querySelectorAll("#stockTable tbody tr");
    rows.forEach(row => {
      const name = row.cells[0].textContent.toLowerCase();
      row.style.display = name.includes(query) ? "" : "none";
    });
  }
</script>
<script>
  const toggle = document.getElementById('themeToggle');
  const body = document.body;

  // Load saved theme
  if (localStorage.getItem('theme') === 'dark') {
    body.classList.add('dark-mode');
    toggle.innerText = '‚òÄÔ∏è Light Mode';
  }

  toggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    const isDark = body.classList.contains('dark-mode');
    toggle.innerText = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });
</script>



  <table id="stockTable">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Quantity</th>
        <th>Critical Limit</th>
      </tr>
    </thead>
    <tbody>
      <!-- JS will populate this -->
    </tbody>
  </table>

  <script>
    fetch("http://localhost:3000/api/stock")
      .then(res => res.json())
      .then(data => {
        const tableBody = document.querySelector("#stockTable tbody");

        data.forEach(product => {
          const row = document.createElement("tr");

          if (product.quantity < product.criticalLimit) {
            row.classList.add("low-stock");
          }

          row.innerHTML = `
            <td>${product.name}</td>
            <td>${product.quantity}</td>
            <td>${product.criticalLimit}</td>
          `;

          tableBody.appendChild(row);
        });
      })
      .catch(err => {
        alert("Error loading stock data. Is your backend running?");
        console.error(err);
      });
  </script>
    <footer>
    &copy; 2025 Nova Squaqron Team | Built for Hackathon
  </footer>
</body>
</html>
